###############################################################################
# Usar una imagen base de Python
###############################################################################
FROM python:3.12-slim

###############################################################################
# Establecer el directorio de trabajo en el contenedor
###############################################################################
WORKDIR /app

###############################################################################
# Copiar los archivos del servidor al contenedor
###############################################################################
COPY ./app /app

###############################################################################
# Instalar las dependencias necesarias
###############################################################################
RUN pip install --no-cache-dir -r requirements.txt

###############################################################################
# Definir variables de entorno
###############################################################################
# Valor por defecto del puerto: 8080
ENV HOST="0.0.0.0"
ENV PORT=8080

###############################################################################
# Exponer el puerto 5000
###############################################################################
EXPOSE ${PORT}

###############################################################################
# Comando para ejecutar el servidor
###############################################################################
CMD ["python", "server.py"]